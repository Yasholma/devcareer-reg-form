document.addEventListener("DOMContentLoaded", function () {
    const t = document.querySelector("#email"),
        e = document.querySelector("#password"),
        i = document.querySelector("#confirm"),
        s = document.querySelector("#name"),
        r = document.querySelector("#phone"),
        a = document.querySelector("#gender"),
        l = document.querySelector(".user-account"),
        o = document.querySelector(".user-profile"),
        d = document.querySelector(".thank-you"),
        n = document.querySelector(".next"),
        c = document.querySelector(".prev"),
        u = document.querySelector(".submit");
    (t.valid = !1),
        (e.valid = !1),
        (i.valid = !1),
        (t.onblur = function () {
            /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.value)
                ? (this.classList.remove("error"), (this.valid = !0))
                : (this.classList.add("error"),
                  (h(this)[1].textContent = "Enter a valid email"),
                  (this.valid = !1));
        }),
        (e.onblur = function () {
            this.value.trim().length < 6
                ? (this.classList.add("error"),
                  (h(this)[1].textContent = "Password min length is 6"),
                  (this.valid = !1))
                : (this.classList.remove("error"), (this.valid = !0));
        }),
        (i.onblur = function () {
            this.value.trim().length !== password.value.trim().length
                ? (this.classList.add("error"),
                  (h(this)[1].textContent = "Password must match"),
                  (this.valid = !1))
                : (this.classList.remove("error"), (this.valid = !0));
        }),
        (s.onblur = function () {
            /\d+/g.test(this.value.trim()) || "" === this.value.trim()
                ? (this.classList.add("error"),
                  (h(this)[1].textContent = "Enter a valid name"),
                  (this.valid = !1))
                : (this.classList.remove("error"), (this.valid = !0));
        }),
        (r.onblur = function () {
            !/\d+/g.test(this.value.trim()) ||
            "" === this.value.trim() ||
            this.value.trim().length < 9
                ? (this.classList.add("error"),
                  (h(this)[1].textContent = "Enter a valid phone number"),
                  (this.valid = !1))
                : (this.classList.remove("error"), (this.valid = !0));
        }),
        (a.onblur = function () {
            "" === this.value.trim()
                ? (this.classList.add("error"),
                  (h(this)[1].textContent = "Select gender"),
                  (this.valid = !1))
                : (this.classList.remove("error"), (this.valid = !0));
        }),
        (n.onclick = function () {
            t.valid &&
                e.valid &&
                i.valid &&
                (this.classList.add("hide"),
                u.classList.remove("hide"),
                c.classList.remove("disabled"),
                (l.style.opacity = "0"),
                l.classList.add("hide"),
                (o.style.opacity = "1"),
                o.classList.remove("hide"),
                o.classList.add("slideRight"));
        }),
        (c.onclick = function () {
            u.classList.add("hide"),
                n.classList.remove("hide"),
                (o.style.opacity = "0"),
                o.classList.add("hide"),
                (l.style.opacity = "1"),
                l.classList.remove("hide"),
                l.classList.add("slideLeft");
        }),
        (u.onclick = function (e) {
            e.preventDefault(),
                s.valid &&
                    r.valid &&
                    a.valid &&
                    (o.classList.add("hide"),
                    d.classList.remove("hide"),
                    (document.querySelector(
                        ".thank-you h4",
                    ).innerHTML = `Thank You ${s.value} for registering with us.`),
                    (document.querySelector(
                        ".thank-you p",
                    ).innerHTML = `We have sent a confirmation mail to ${t.value}`),
                    c.classList.add("hide"),
                    u.classList.add("hide"),
                    n.classList.add("hide"));
        });
    const h = t => {
        let e = [];
        if (!t.parentNode) return e;
        let i = t.parentNode.firstChild;
        for (; i; )
            1 === i.nodeType && i !== t && e.push(i), (i = i.nextSibling);
        return e;
    };
});
